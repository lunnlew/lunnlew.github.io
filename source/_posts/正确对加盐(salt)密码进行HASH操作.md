---
title: 正确对加盐(salt)密码进行HASH操作
date: 2016-06-09 15:29:59
tags: [开发,安全,密码,hash]
categories: [开发,安全]
---

-----
参考

    原始文章:http://crackstation.net/hashing-security.htm
    翻译文章:http://drops.wooyun.org/papers/1066
    功能声明:https://defuse.ca/php-pbkdf2.htm
    Github(Origin):https://github.com/defuse/password-hashing
-----

### 背景
    大多数开发者(应当)知道可以通过HASH来保护密码安全，但是如何来保证足够强度的安全呢?有经验的开发者告诉我们可以通过增加盐(salt)来增强安全度。但是在处理这件事的操作上，很多人都犯了错。那么该如何对密码进行恰当的处理来阻止或者减弱例如彩虹表,基于时间差攻击等方式的攻击呢。
### 攻击方式
#### A.查表破解
    对于特定的hash类型，如果需要破解大量hash的话，查表是一种非常有效而且快速的方式。它的理念就是预先计算(pre-compute)出密码字典中每一个密码的hash。然后把hash和对应的密码保存在一个表里。一个设计良好的查询表结构，即使存储了数十亿个hash，每秒钟仍然可以查询成百上千个hash。
#### B.反向查表破解
    这种方式可以让攻击者不预先计算一个查询表的情况下同时对大量hash进行字典和暴力破解攻击。

    首先，攻击者会根据获取到的数据库数据制作一个用户名和对应的hash表。然后将常见的字典密码进行hash之后，跟这个表的hash进行对比，就可以知道用哪些用户使用了这个密码。这种攻击方式很有效果，因为通常情况下很多用户都会有使用相同的密码。
#### C.彩虹表
    彩虹表是一种使用空间换取时间的技术。跟查表破解很相似。只是它牺牲了一些破解时间来达到更小的存储空间的目的。因为彩虹表使用的存储空间更小，所以单位空间就可以存储更多的hash。彩虹表已经能够破解8位长度的任意[md5hash](http://www.freerainbowtables.com/en/tables2/)。彩虹表具体的原理可以参考http://www.project-rainbowcrack.com/
#### D.时间差攻击
#### F.HASH碰撞
### 安全需求
#### A.同一个密码可以有不同的HASH值
#### B.密码HASH串比较应当具有恒定时间
#### C.密码HASH计算应当足够慢但不影响正常工作
#### D.不易发生HASH碰撞
